<!-- App Top Bar TODO: Create top search bar -->
<ion-toolbar color='light' #header>
    <ion-searchbar color='light'
        #searchInput
        debounce='800'
        autocomplete='off'
        (ionChange)='doSearch($event)'></ion-searchbar>
</ion-toolbar>

<mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

<ion-content
    [fullscreen]="true"
    scrollEvents='true'
    appHideToolbar
    [header]='header'>
    <!-- Display search results -->
    <ion-text color='dark' *ngIf="!profiles.length && !hashtags.length">
        <p class="mat-body error-placeholder mt-4">
            Haven't found anything yet&hellip;
        </p>
    </ion-text>
    <ion-list *ngIf="profiles.length" class="mb-2">
        <ion-text color='dark'><h3 mat-subheader>Users</h3></ion-text>
        <ion-item *ngFor="let result of profiles">
            <mat-divider></mat-divider>
            <img matListAvatar [src]="result.profilePic" class="avatar"  [routerLink]="['/app', 'profile', result.username]"/>
            <ion-text color='dark'>
                <h3 matLine>
                    <span [routerLink]="['/app', 'profile', result.username]" class="mat-h3 font-weight-bold">{{result.username}}</span>
                </h3>
            </ion-text>
        </ion-item>
    </ion-list>
    <ion-list *ngIf="hashtags.length" class="mb-2">
        <ion-text color='dark'><h3 mat-subheader>Hashtags</h3></ion-text>
        <ion-item *ngFor="let result of hashtags" [routerLink]="['/app', 'hashtag', result.substring(1, result.length)]" >
            <mat-divider></mat-divider>
            <ion-text color='dark'>
                <h3 matLine>
                    <span class="mat-h3 font-weight-bold">{{result}}</span>
                </h3>
            </ion-text>
        </ion-item>
    </ion-list>
</ion-content>